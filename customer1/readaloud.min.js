function ReadAloudWebSpeech(){var e,t,n,o=this,r=new function(){var e;this.speak=function(e){var t,n;function o(){Promise.resolve(e.apply(n.this,n.args)).then(n.fulfill).catch(n.reject),n=t=null}function r(){return n&&n.reject(Error("Aborted")),n={this:this,args:arguments},new Promise(function(e,a){n.fulfill=e,n.reject=a,t=t||setTimeout(o,Math.max(0,r.notBefore-Date.now()))})}return r.notBefore=Date.now(),r}(function(t,n,o){return(e=new SpeechSynthesisUtterance).text=t,e.voice=n.voice,e.lang=n.lang,e.pitch=n.pitch,e.rate=n.effectiveRate,e.volume=n.volume,t=new Promise(function(t){e.onstart=t}),e.onend=o,e.onerror=function(e){console.error(e.error)},speechSynthesis.speak(e),t}),this.stop=function(){e&&(e.onend=null),speechSynthesis.cancel(),this.speak.notBefore=Date.now()+100},this.pause=function(){speechSynthesis.pause()},this.resume=function(){speechSynthesis.resume()},this.getVoices=function(){return"undefined"==typeof speechSynthesis?Promise.resolve([]):new Promise(function(e){var t,n=speechSynthesis.getVoices()||[];n.length?e(n):(t=!1,speechSynthesis.onvoiceschanged=function(){t||(t=!0,e(speechSynthesis.getVoices()||[]))},setTimeout(function(){t||(t=!0,e([]))},3e3))}).then(function(e){return e.filter(function(e){return e.lang&&e.name})})}},a=(window.addEventListener("pagehide",r.stop.bind(r)),window.addEventListener("unload",r.stop.bind(r)),{lang:null,voice:null,rate:1,pitch:1,volume:1}),i=(Object.defineProperty(a,"isGoogleNative",{get:function(){return/^Google\s/.test(this.voice.name)}}),Object.defineProperty(a,"effectiveRate",{get:function(){return this.rate*(this.isGoogleNative?.9:1)}}),"IDLE"),s=/android/i.test(navigator.userAgent),u=Promise.resolve(null);function c(e){i!=e&&(e=i=e,s&&"wakeLock"in navigator&&(u="PLAYING"==e?u.then(function(e){return console.log("acquiring wake lock"),e||navigator.wakeLock.request("screen")}):u.then(function(e){return console.log("releasing wake lock"),e&&e.release()}).then(function(){return null})))}Object.defineProperty(this,"currentTime",{get:function(){return n},set:function(e){n=Math.round(e),o.dispatchEvent(new Event("timeupdate")),"PAUSED"==i&&o.stop(),"PLAYING"==i&&(o.stop(),o.play())}}),Object.defineProperty(this,"duration",{get:function(){return t.length||1/0}}),Object.defineProperty(this,"voice",{get:function(){return a.voice},set:function(e){e&&(a.voice=e,o.dispatchEvent(new Event("voicechange")),"PAUSED"==i&&o.stop(),"PLAYING"==i&&(o.stop(),o.play()))}}),Object.defineProperty(this,"playbackRate",{get:function(){return a.rate},set:function(e){a.rate=e,o.dispatchEvent(new Event("ratechange")),"PAUSED"==i&&o.stop(),"PLAYING"==i&&(o.stop(),o.play())}}),Object.defineProperty(this,"volume",{get:function(){return a.volume},set:function(e){a.volume=e,o.dispatchEvent(new Event("volumechange")),"PAUSED"==i&&o.stop(),"PLAYING"==i&&(o.stop(),o.play())}}),this.isTTS=!0,this.voices=null,this.ready=function(e){return r.getVoices().then(function(e){return e.forEach(function(e){var t,n,o,r,a;e.score=(o=(t=e).lang.toLowerCase().split(/[-_]/),r=r.toLowerCase().split(/[-_]/),a=0,o[0]==r[0]&&(a+=1,o[1]==r[1]&&(a+=2),/^Google\s/.test(t.name)&&(a+=1)),a)}),e.filter(function(e){return 0<e.score})}).then(function(t){return o.voices=t,a.lang=e,a.voice=t.reduce(function(e,t){return!e||t.score>e.score?t:e},null),!!a.voice})},this.setText=function(i){var s,u,c;e=a.isGoogleNative?new p(r,16e3):r,s=a.lang,c=new((u=/^zh|ko|ja/.test(s))?h:f),t=a.isGoogleNative?new d((/^(de|ru|es|id)/.test(s)?32:36)*(u?2:1)*a.effectiveRate,c).breakText(i):c.getParagraphs(i),n=0,o.dispatchEvent(new Event("timeupdate")),o.dispatchEvent(new Event("canplay"))},this.play=function(){return"PAUSED"==i?(c("PLAYING"),e.resume(),o.dispatchEvent(new Event("play")),o.dispatchEvent(new Event("playing")),Promise.resolve()):"IDLE"==i?t.length?(n>=t.length&&(n=0,o.dispatchEvent(new Event("timeupdate"))),c("PLAYING"),o.dispatchEvent(new Event("play")),(function r(){return e.speak(t[n],a,function(){n++,o.dispatchEvent(new Event("timeupdate")),n<t.length?r():(c("IDLE"),o.dispatchEvent(new Event("ended")))})})().then(function(){o.dispatchEvent(new Event("playing"))})):Promise.resolve():void 0},this.pause=function(){!s&&e.pause?(e.pause(),c("PAUSED"),o.dispatchEvent(new Event("pause"))):o.stop()},this.stop=function(){e.stop(),c("IDLE"),o.dispatchEvent(new Event("pause"))};var l={};function d(e,t){function n(e){return a(t.getSentences(e),o)}function o(e){return a(t.getPhrases(e),r)}function r(n){for(var o=t.getWords(n),r=Math.min(Math.ceil(o.length/2),e),a=[];o.length;)a.push(o.slice(0,r).join("")),o=o.slice(r);return a}function a(n,o){function r(){i.parts.length&&(a.push(i.parts.join("")),i={parts:[],wordCount:0})}var a=[],i={parts:[],wordCount:0};return n.forEach(function(n){var s=t.getWords(n).length;if(e<s){r();for(var u=o(n),c=0;c<u.length;c++)a.push(u[c])}else i.wordCount+s>e&&r(),i.parts.push(n),i.wordCount+=s}),r(),a}this.breakText=function(e){return a(t.getParagraphs(e),n)}}function f(){function e(e,t){for(var n=[],o=0;o<e.length;o+=2){var r=o+1<e.length?e[o]+e[o+1]:e[o];r&&(t&&n.length&&t.test(n[n.length-1])?n[n.length-1]+=r:n.push(r))}return n}this.getParagraphs=function(t){return e(t.split(/((?:\r?\n\s*){2,})/))},this.getSentences=function(t){return e(t.split(/([.!?]+[\s\u200b]+)/),/\b(\w|[A-Z][a-z]|Assn|Ave|Capt|Col|Comdr|Corp|Cpl|Gen|Gov|Hon|Inc|Lieut|Ltd|Rev|Univ|Jan|Feb|Mar|Apr|Aug|Sept|Oct|Nov|Dec|dept|ed|est|vol|vs)\.\s+$/)},this.getPhrases=function(t){return e(t.split(/([,;:]\s+|\s-+\s+|—\s*)/))},this.getWords=function(e){for(var t=e.trim().split(/([~@#%^*_+=<>]|[\s\-—/]+|\.(?=\w{2,})|,(?=[0-9]))/),n=[],o=0;o<t.length;o+=2)t[o]&&n.push(t[o]),o+1<t.length&&(/^[~@#%^*_+=<>]$/.test(t[o+1])?n.push(t[o+1]):n.length&&(n[n.length-1]+=t[o+1]));return n}}function h(){function e(e){for(var t=[],n=0;n<e.length;n+=2)n+1<e.length?t.push(e[n]+e[n+1]):e[n]&&t.push(e[n]);return t}this.getParagraphs=function(t){return e(t.split(/((?:\r?\n\s*){2,})/))},this.getSentences=function(t){return e(t.split(/([.!?]+[\s\u200b]+|[\u3002\uff01]+)/))},this.getPhrases=function(t){return e(t.split(/([,;:]\s+|[\u2025\u2026\u3000\u3001\uff0c\uff1b]+)/))},this.getWords=function(e){return e.replace(/\s+/g,"").split("")}}function p(e,t){var n;this.speak=function(o,r,a){return clearTimeout(n),n=setTimeout(function(){e.stop(),onEvent({type:"end",charIndex:o.length})},t),e.speak(o,r,function(){clearTimeout(n),a()})},this.stop=function(){clearTimeout(n),e.stop()}}this.addEventListener=function(e,t){l[e]?l[e].push(t):l[e]=[t]},this.removeEventListener=function(e,t){l[e]&&(l[e]=l[e].filter(function(e){return e!=t}))},this.dispatchEvent=function(e){l[e.type]&&l[e.type].forEach(function(t){t(e)})}}function ReadAloudPlayer(e,t,n,o){var r={};!e.isTTS&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&n(".ra-no-ios").hide(),n(".ra-logo",t).css("cursor","pointer").click(function(){window.open("https://www.readaloudwidget.com/","_blank")});var a=n(".ra-btn-play",t),i=n(".ra-btn-rewind",t),s=(a.click(function(){n(t).is(".ra-playing")?e.pause():e.play()}),i.click(function(){e.currentTime=Math.max(e.currentTime-(e.isTTS?1:5),0)}),n(".ra-btn[data-toggle]").click(function(){var e=n(this).data("toggle");return n(".ra-overlay",t).not(e).hide(),n(e).toggle(),!1}),n(document).on("mouseup touchend touchcancel",function(e){n(e.target).closest(".ra-btn[data-toggle], .ra-overlay").length||n(".ra-overlay",t).hide()}),n(".ra-time-text",t)),u=n(".ra-error-text",t),c=n(".ra-status-bg",t),l=n(".ra-load-progress-bar",t),d=n(".ra-playback-position-bar",t),f=n(".ra-seek-knob",t),h=(c.click(function(t){e.currentTime=E(c,t)*e.duration}),f.click(function(){return!1}),f.on("mousedown touchstart",function(){return r.seekKnob=!0,k(function(t){var t=E(c,t),n=100*t+"%";f.css("left",n),d.css("width",n),e.duration&&e.duration!=1/0&&T(t*e.duration)},function(t){r.seekKnob=!1,e.currentTime=E(c,t)*e.duration}),!1}),n(".ra-voice-select",t));e.isTTS?(e.voices.forEach(function(e){n("<option>").text(e.name).val(e.name).appendTo(h)}),h.val(e.voice.name),h.change(function(){var t=e.voices.find(function(e){return e.name==h.val()});e.voice=t,localStorage.setItem("sitespeakerVoice",t.name)})):h.parent().hide();var p=n(".ra-rate-bg",t),g=n(".ra-rate-bar",t),v=n(".ra-rate-knob",t);function m(t){e.playbackRate=t,localStorage.setItem("sitespeakerRate",t)}p.click(function(e){m(Math.exp((2*E(p,e)-1)*Math.log(2)))}),v.click(function(){return!1}),v.on("mousedown touchstart",function(){r.rateKnob=!0;var t=A(e.isTTS?500:100,m);return k(function(e){var e=E(p,e),n=100*e+"%";v.css("left",n),g.css("width",n),t(Math.exp((2*e-1)*Math.log(2)))},function(){r.rateKnob=!1}),!1});var $,y=n(".ra-volume-bg",t),b=n(".ra-volume-bar",t),_=n(".ra-volume-knob",t);function w(t){e.volume=t,localStorage.setItem("sitespeakerVolume",t)}function k(e,t){function o(t){return t.clientX=t.originalEvent.changedTouches[0].clientX,t.clientY=t.originalEvent.changedTouches[0].clientY,e(t),!1}function r(e){return e.clientX=e.originalEvent.changedTouches[0].clientX,e.clientY=e.originalEvent.changedTouches[0].clientY,a(e),!1}function a(i){return n(document).off("mousemove",e),n(document).off("mouseup mouseleave",a),n(document).off("touchmove",o),n(document).off("touchend touchcancel",r),t&&t(i),!1}n(document).on("mousemove",e),n(document).on("mouseup mouseleave",a),n(document).on("touchmove",o),n(document).on("touchend touchcancel",r)}function E(e,t){var n=e.get(0).getBoundingClientRect(),e=e.is(".ra-vertical")?1-(t.clientY-n.top)/n.height:(t.clientX-n.left)/n.width;return Math.min(1,Math.max(e,0))}function T(t){var n;e.isTTS?s.text(Math.min(Math.round(t)+1,e.duration)+"/"+e.duration):s.text("-"+(n=Math.floor((t=e.duration-t)/60),t=Math.floor(t-60*n),(n<10?"0":"")+n+":"+(t<10?"0":"")+t))}function A(e,t){var n,o;return function(){o={this:this,args:arguments},n=n||setTimeout(r,e)};function r(){n=null,t.apply(o.this,o.args)}}y.click(function(e){w(E(y,e))}),_.click(function(){return!1}),_.on("mousedown touchstart",function(){r.volumeKnob=!0;var t=A(e.isTTS?500:100,w);return k(function(e){var e=E(y,e),n=100*e+"%";_.css("left",n),b.css("width",n),t(e)},function(){r.volumeKnob=!1}),!1}),n(e).on("play",function(){n(t).addClass("ra-playing")}),n(e).on("progress",function(e){l.css("width",100*e.loaded/e.total+"%")}),n(e).on("playing",function(){n(t).removeClass("ra-stalled ra-error")}),n(e).on("pause ended",function(){n(t).removeClass("ra-playing")}),n(e).on("error",function(){n(t).addClass("ra-error"),u.text(e.error.message)}),n(e).on("stalled",function(){n(t).addClass("ra-stalled")}),n(e).on("timeupdate",function(){var t;r.seekKnob||(t=100*e.currentTime/e.duration+"%",f.css("left",t),d.css("width",t),e.duration&&e.duration!=1/0&&T(e.currentTime))}),n(e).on("voicechange",function(){h.val(e.voice.name)}),n(e).on("ratechange",function(){var t;r.rateKnob||(t=50+50*Math.log(e.playbackRate)/Math.log(2)+"%",p.is(".ra-vertical")?(v.css("bottom",t),g.css("height",t)):(v.css("left",t),g.css("width",t)))}),n(e).on("volumechange",function(){var t;r.volumeKnob||(t=100*e.volume+"%",y.is(".ra-vertical")?(_.css("bottom",t),b.css("height",t)):(_.css("left",t),b.css("width",t)))}),e.isTTS&&($=localStorage.getItem("sitespeakerVoice"))&&(a=e.voices.find(function(e){return e.name==$}))&&(e.voice=a),(i=localStorage.getItem("sitespeakerRate")||o.defaultRate)&&(e.defaultPlaybackRate=e.playbackRate=Number(i)),n(e).triggerHandler("ratechange"),(a=localStorage.getItem("sitespeakerVolume")||o.defaultVolume)&&(e.volume=Number(a)),n(e).triggerHandler("volumechange")}function ReadAloudDoc(e){var t=["H1","H2","H3","H4","H5","H6","div"],n=["P","BLOCKQUOTE","PRE"],o=["OL","UL"];function r(t){e(t).find("sup").hide(),e(t).find("*").filter(function(){return this.style&&"absolute"==this.style.position}).hide();var n=t.innerText.trim();return"LI"==t.tagName?e(t).index()+1+". "+n:n}function a(e){return -1==(e=e?t.indexOf(e.tagName):-1)?100:e+1}function i(e,t){return e==document.body?null:1==e.nodeType&&!t&&e.lastChild?e.lastChild:e.previousSibling||i(e.parentNode,!0)}function s(e){return e}this.getTexts=function(){0<e(".read-aloud").length||(0<e(".sitespeaker-read-aloud").length?e(".sitespeaker-read-aloud").addClass("read-aloud"):(l=function(e){for(var t=e.slice(0,1),n=1;n<e.length;n++)e[n].closest(".panel-body").length>0&&e[n]!=e[n-1]&&t.push(e[n]);return t}(l=e("p").not("blockquote > p").parent().get()),(l=e(l).filter(":visible").get()).length?(u=l.map(function(t){return e(t).children(n.join(", ")).text().length}),c=Math.max.apply(null,u),(l=l.filter(function(e,t){return u[t]>c/7})).forEach(function(r){e(function(o){for(var r,s=[],o=e(o).children(t.concat(n).join(", ")).get(0),u=a(o),c=i(o,!0);c&&!e(c).hasClass("read-aloud");)1!=c.nodeType||(r=a(c))<u&&(s.push(c),u=r),c=i(c);return s.reverse()}(r)).addClass("read-aloud"),e(r).children(t.concat(n).join(", ")).addClass("read-aloud"),e(r).children(o.join(", ")).children("li").addClass("read-aloud")})):e(t.concat(n).join(", ")).filter(":visible").addClass("read-aloud")));var u,c,l=e(".no-read-aloud:visible").hide(),d=function(t){for(var n=e(t).get().map(r).filter(s),o=0;o<n.length;o++)/\w$/.test(n[o])&&(n[o]+=".");return console.log(n),n}(".read-aloud:visible");return l.show(),d}}function readAloudInit(o,r,t){document.querySelector(".panel-body .title.margin-bottom-lg").classList.add("read-aloud"),document.querySelector(".panel-body .hometext.m-bottom").classList.add("read-aloud"),document.getElementsByClassName("ra-btn-play")[0].removeAttribute("onclick");let textTwo=document.querySelectorAll(".panel-body #news-bodyhtml");textTwo.forEach(e=>{e.classList.add("read-aloud")});var i=o.getAttribute("data-lang"),a=o.getAttribute("data-voice"),s=o.getAttribute("data-key"),u=o.getAttribute("data-speed")||o.getAttribute("data-rate"),c=o.getAttribute("data-volume"),l="free"==a||s.startsWith("39d740e")?new ReadAloudWebSpeech:null;return r&&t?d().then(function(){var e=r.getElementsByClassName("ra-btn-play")[0],t=function(){e.removeEventListener("click",t),/iPad|iPhone|iPod/.test(navigator.userAgent)&&(o.src="https://assets.readaloudwidget.com/embed/sound/silence.mp3",o.play(),l&&"undefined"!=typeof speechSynthesis&&speechSynthesis.speak(new SpeechSynthesisUtterance(" "))),n()};e.addEventListener("click",t)}):n();function n(){var n;return Promise.all([l&&l.ready(i),!window.jQuery&&h("https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js").then(eval)]).then(function(e){n=e[0];var f,h,e="function"==typeof readAloudGetText?readAloudGetText(jQuery):new ReadAloudDoc(jQuery).getTexts().join("\n\n");return Promise.all([n?e:(f="https://ws.readaloudwidget.com/synthesize?t="+Date.now(),h={text:e,lang:i,voice:a,key:s,referer:location.href},new Promise(function(e,p){var g=new XMLHttpRequest;g.open("POST",f,!0),g.setRequestHeader("Content-type","application/json"),g.onreadystatechange=function(){4==g.readyState&&(200==g.status?e(g.responseText):p(Error(g.responseText||g.statusText||g.status)))},g.send(JSON.stringify(h))})).then(JSON.parse).then(function(e){return e.url}),r&&(t?Promise.resolve():d()).then(function(){new ReadAloudPlayer(n?l:o,r,jQuery,{defaultRate:u,defaultVolume:c}),jQuery(r).addClass("ra-loading")})])}).then(function(e){function t(){jQuery(r).removeClass("ra-loading")}n?(jQuery(l).one("canplay",t),l.setText(e[0]),l.play()):(jQuery(o).one("canplay",t),o.src=e[0],o.play())})}function d(){var e,t=r.getAttribute("data-skin");return Promise.all([h(t+"/template.html"),(t+="/styles.css",e=document.createElement("LINK"),document.head.appendChild(e),e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),void e.setAttribute("href",t))]).then(function(e){})}function h(e){return new Promise(function(t,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(200==o.status?t(o.responseText):n(Error(o.responseText||o.statusText||o.status)))},o.send(null)})}}